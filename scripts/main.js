!function e(t,n,s){function o(a,i){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,s)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(e,t,n){"use strict";function s(e){p=e,u.set({name:l.getAuth().password.email,status:e})}function o(){var e=l.getAuth();if(e){var t=i+"users/"+e.uid,n=new Firebase(t),s="https://rt-student.firebaseio.com/users/"+e.uid+"/lessons/",o=new Firebase(s);n.once("value",function(e){var t=e.val();console.log(t.email),$("#welcome").text("welcome "+t.email)}),$("#lesson-list").empty(),o.on("child_added",function(e){var t=e.val(),n=$("<li>").attr("class","list-group-item").append($("<p>").attr({"class":"lesson",id:e.key()}).text(t.lesson.name).append()).append($("<span>").attr({"class":"lessonDate"}).text(t.lesson.date));$("#lesson-list").append(n)})}}function r(e){var t=l.getAuth(),n="https://rt-student.firebaseio.com/users/"+t.uid+"/lessons/"+e,s=new Firebase(n);s.once("value",function(e){console.log(e.val()),$("#choosenTitle").empty(),$("#choosenNote").empty();var t=e.val();$("#choosenTitle").text("Vald föreläsning: "+t.lesson.name),t.notes&&$("#choosenNote").text(t.notes.note)})}var a=e("./rtButtons"),i="https://rt-student.firebaseio.com/",l=new Firebase("https://rt-student.firebaseio.com/");$("#redBtn").click(function(){(0,a.redBtn)(this)}),$("#loadCurrentUser").click(function(){o()});var c=new Firebase("https://rt-student.firebaseio.com/presence"),u=c.push(),d=new Firebase("https://rt-student.firebaseio.com/.info/connected");d.on("value",function(e){e.val()?(u.onDisconnect().remove(),s("★ online")):s("★ offline")});var p;c.on("child_added",function(e){var t=e.val(),n=$("#user-list"),s=$("<li>").append($("<span>").attr({"class":"username"}).text(t.name)),o=$("<a>").attr({href:"#"}).append(s);n.append(o)}),c.on("child_removed",function(e){var t=e.val(),n=$("#user-list"),s=$("<li>").append($("<span>").attr({"class":"username",fontSize:"30px"}).text(t.name)),o=$("<a>").attr({href:"#"}).append(s);n.remove(o)}),$("#regUser").on("click",function(){l.createUser({email:$("#email").val(),password:$("#pwd").val()},function(e,t){if(e)$("#error").text(e),console.log("Error creating user:",e);else{console.log("Successfully created user account with uid:",t.uid);var n={email:$("#email").val()};f(t.uid,n)}})});var f=function(e,t){l.child("users").child(e).set(t)};$("#loginUser").on("click",function(){l.authWithPassword({email:$("#email").val(),password:$("#pwd").val()},function(e,t){e?($("#error").text(e),console.log("Login Failed!",e)):(console.log("Login Success!:",t),o(),window.location.href="profile.html")})}),$(document).on("click",".lesson",function(){$(".choosenLessonStyle").removeClass("choosenLessonStyle"),$(this.parentElement).addClass("choosenLessonStyle"),r(this.id)});var m=l.child("chat");$("#submit-btn").bind("click",function(){var e=$("#comments"),t=$.trim(e.val());if(console.log(t.length),t.length<1)console.log("Kommentar måste vara längre");else{var n=l.getAuth();m.push({comment:{user:n.password.email,content:t}},function(e){null!==e&&console.log("Error")}),e.val("")}return!1}),m.on("child_added",function(e){var t=$("#card-success"),n=e.val().comment,s=$(".message-list");console.log(n);var o=$("<li>").append($("<img>").attr({src:"https://d2ln1xbi067hum.cloudfront.net/assets/default_user-0ee609e3907f2aa89a7e2584074f33a3.png","class":"profile-img pull-left",width:"75px"})).append($("<div>").attr("class","message-block").append($("<span>").attr("class","username").text(n.user)).append($("<p>").text(n.content).append())),r=$("<a>").attr({href:"#"}).append(o);s.append(r),t.scrollTop(t.prop("scrollHeight"))}),$("#reset-btn").bind("click",function(){m.remove()})},{"./rtButtons":2}],2:[function(e,t,n){"use strict";function s(e){$(e).hasClass("active")&&e.preventDefault();var t=parseInt($("#redBtnCount").text());$("#redBtnCount").text(t+1),a.set({isActive:"true",count:t}),$(".card.summary-inline.red").addClass("active")}function o(){function e(){a.set({isActive:"false",count:"0"}),$("#redBtnCount").text("0"),$(".card.summary-inline.red").removeClass("active")}setTimeout(e,3e3)}Object.defineProperty(n,"__esModule",{value:!0}),n.redBtn=s;var r=new Firebase("https://rt-student.firebaseio.com/rtButtons"),a=r.child("red");a.on("child_changed",function(e){console.log(e.val()),o()}),a.once("value",function(e){a.set({isActive:"false"}),$("#redBtnCount").text("0")})},{}]},{},[1]);